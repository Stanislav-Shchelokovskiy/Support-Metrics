SET NOCOUNT ON
SET ANSI_WARNINGS OFF
:setvar SQLCMDERRORLEVEL 1
GO

CREATE DATABASE CRM
GO

USE CRM
GO

--SaleItems--
CREATE TABLE SaleItems (
	Id			UNIQUEIDENTIFIER,
	Parent		UNIQUEIDENTIFIER,
	Name		VARCHAR(30),
	IsTraining	BIT
)
INSERT INTO SaleItems
VALUES	('00000000-0000-0000-0000-000000000001',	NULL,									'universal',	0),
		('00000000-0000-0000-0000-000000000002',	'00000000-0000-0000-0000-000000000001',	'dxp',			0),
		('00000000-0000-0000-0000-000000000003',	'00000000-0000-0000-0000-000000000002',	'devextreme',	0),
		('00000000-0000-0000-0000-000000000004',	NULL,									'free bundle',	0),
		('00000000-0000-0000-0000-000000000005',	NULL,									'training',		1)
		
--SaleItem_Build--
CREATE TABLE SaleItem_Build (
	Id			UNIQUEIDENTIFIER,
	SaleItem_Id	UNIQUEIDENTIFIER
)
INSERT INTO SaleItem_Build
VALUES	('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
		('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000002'),
		('00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000003'),
		('00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000004')

--SaleItemBuild_Product_Plaform--
CREATE TABLE SaleItemBuild_Product_Plaform(
	SaleItemBuild_Id	UNIQUEIDENTIFIER,
	Product_Id			UNIQUEIDENTIFIER,
	Platform_Id			UNIQUEIDENTIFIER
)
INSERT INTO SaleItemBuild_Product_Plaform
VALUES	('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001'),
		('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001'),
		('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001'),
		('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001'),
		('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001'),

		('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000002'),
		('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000002'),
		('00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000008', '00000000-0000-0000-0000-000000000002'),
		('00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000009', '00000000-0000-0000-0000-000000000002'),
		('00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000010', '00000000-0000-0000-0000-000000000002'),
		('00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000011', '00000000-0000-0000-0000-000000000003'),

		('00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000012', '00000000-0000-0000-0000-000000000004'),
		('00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000013', '00000000-0000-0000-0000-000000000004'),
		('00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000014', '00000000-0000-0000-0000-000000000004'),
		('00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000015', '00000000-0000-0000-0000-000000000004')

--Platforms--
CREATE TABLE Platforms (
	Id				UNIQUEIDENTIFIER,
	Name			VARCHAR(20),
	DefaultTribe	UNIQUEIDENTIFIER
)
INSERT INTO Platforms
VALUES	('00000000-0000-0000-0000-000000000001', 'platform1',			'00000000-0000-0000-0000-000000000001'	),
		('00000000-0000-0000-0000-000000000002', 'platform2',			'00000000-0000-0000-0000-000000000002'	),
		('00000000-0000-0000-0000-000000000003', 'should be ignored',	NULL									),
		('00000000-0000-0000-0000-000000000004', 'platform4',			'00000000-0000-0000-0000-000000000003'	)

--Products--
CREATE TABLE Products (
	Id				UNIQUEIDENTIFIER,
	Name			VARCHAR(20),
	Tribe_Id	UNIQUEIDENTIFIER
)
INSERT INTO Products
VALUES	('00000000-0000-0000-0000-000000000001', 'product1',			'00000000-0000-0000-0000-000000000001'	),
		('00000000-0000-0000-0000-000000000002', 'product2',			'00000000-0000-0000-0000-000000000001'	),
		('00000000-0000-0000-0000-000000000003', 'product3',			'00000000-0000-0000-0000-000000000001'	),
		('00000000-0000-0000-0000-000000000004', 'product4',			'00000000-0000-0000-0000-000000000002'	),
		('00000000-0000-0000-0000-000000000005', 'product5',			'00000000-0000-0000-0000-000000000002'	),
		('00000000-0000-0000-0000-000000000006', 'product6',			'00000000-0000-0000-0000-000000000003'	),
		('00000000-0000-0000-0000-000000000007', 'product7',			'00000000-0000-0000-0000-000000000003'	),
		('00000000-0000-0000-0000-000000000008', 'product8',			'00000000-0000-0000-0000-000000000003'	),
		('00000000-0000-0000-0000-000000000009', 'product9',			'00000000-0000-0000-0000-000000000003'	),
		('00000000-0000-0000-0000-000000000010', 'product10',			'00000000-0000-0000-0000-000000000002'	),
		('00000000-0000-0000-0000-000000000011', 'should be ignored',	NULL									),
		('00000000-0000-0000-0000-000000000012', 'product12',			'00000000-0000-0000-0000-000000000003'	),
		('00000000-0000-0000-0000-000000000013', 'product13',			'00000000-0000-0000-0000-000000000003'	),
		('00000000-0000-0000-0000-000000000014', 'product14',			'00000000-0000-0000-0000-000000000003'	),
		('00000000-0000-0000-0000-000000000015', 'product15',			'00000000-0000-0000-0000-000000000003'	)

--Tribes--
CREATE TABLE Tribes (
	Id		UNIQUEIDENTIFIER,
	Name	VARCHAR(20),
)
INSERT INTO Tribes
VALUES	('00000000-0000-0000-0000-000000000001', 'tribe1'),
		('00000000-0000-0000-0000-000000000002', 'tribe2'),
		('00000000-0000-0000-0000-000000000003', 'tribe3')
