При расчёте license статусов лицензии берутся только те, для которых есть ордера. Ордер бывает платный или бесплатный. И он же определяет платность или бесплатность лицензии для пользователя. Т.е. человек может иметь Universal лицензию и при этом лицензионный статус тикета free - это значит, что он за эту Universal не платил. Лицензии для которых нет ордеров отфильтровываются (такое может быть для доисторических лицензий, которые были когда-то давно, например, Navigation, Layout & Multi-Purpose Controls Subscription v12.2). Если у человека есть только такие доисторические лицензии и никогда не было никаких других, то при расчётах всё будет выглядет так, как будто у него никогда и не было лицензий (т.е. у человека будет статус trial).

Среди всех лицензий наиболее подходящую мы вибираем так:
1. Выполняем сопоставление продуктов и платформ в тикете с продуктами и платформами в лицензии, а так же дату создания тикета с license subscription start и expiration date и на основе этого получаем лицензионный статус. Хотя мы не выполняем сопоставления билда в тикете с билдом в лицензии, в старую лицензию не попадают новые продукты тк у лицензии есть базовый набор продуктов, который меняется для всех лицензий, а так же bundled skus, которые идут бесплатно вместе с лицензией. Bundled skus - это и есть новые продукты входящие в опр. лицензию, начиная с какого-то момента. Bundled skus для каждой версии одной и той же лицензии и у каждого человека могут быть разные.
2. Сортируем подходящие лицензии в порядке возрастания лицензионного статуса (см. след. абзац 'Лицензионный статус..')
3. Берём топ 1 из получившегося списка

В экселе лицензии записываются в 2 колонки: most_appropriate_license и parent_license.
most_appropriate_license содержит ту лицензию, которая подходит к продуктам и/или платформам тикета. Она может быть бандлом в другой лицензии. В таких случаях, parent_license будет содержать имя лицензии, в которую входит эта бандловая лицензия.
Если нужно получить исключительно платные подписки, то в экселе надо взять IF(ISBLANK(parent_license), most_appropriate_license,parent_license). Другими словами, отдать приоритет parent_license. Если его нет, то взять most_appropriate_license.

Лицензионный статус привязывается к тикету, а не к пользователю и считается так:<br>
1. Licensed = у создателя тикета на момент создания была платная лицензия или если он из Barclays.
2. Free = на момент создания тикета у человека была бесплатная лицензия. Бесплатная значит у ордера статус 'бесплатно'. т.е. денег человек не платил вне зависимости от того какая у него лицензия - например, Xamarin или Universal и т.д.
3. Expired = на момент создания была истёкшая платная лицензия
4. Revoked = тикет был создан после того как у человека отозвали лицензию
5. Assigned to someone - человек владеет лицензией, но он отдал эту лицензию кому-то и она ему недоступна.
6. No license = среди всех лицензий не нашлось такой, которая бы включала платформы / продукты такета
7. No license, Free = (6), но есть бесплатная какая-то лицензия.
8. No license, Licensed = (6), но есть платная какая-то лицензия.
9. No license, Licensed, Revoked = (6), но была платная какая-то лицензия,  которую отозвали
10. No license, Expired = (6), но есть истёкшая платная какая-то лицензия.
11. No license, Expired, Revoked = (6), но была истёкшая какая-то, которую отозвали.
12. No license, Free, Expired = (6), но есть бесплатная истёкшая.
13. Trial = на момент создания тикета у человека не было ордеров.

Если у человека статус No license %, но вы не видите в CRM подходящих лицензий, то скорее всего они были upgraded.

Конверсию мы считаем вот так:<br>
1. Если у пользователя были триальные за тот отрезок времени, который доступен для анализа. Тут именно важно, что не вообще среди всех тикетов что есть, а именно среди тех тикетов, которые попали в этот отрезок времени. Длина отрезка считается как (текущий год) минус (4 года).
2. Если триальных тикетов не было, то и конверсии значит быть не могло.
3. Если триальные тикеты были, то
<br> 1) Если есть тикеты с лицензионным статусом  = licensed, то он считается converted_paid.
<br> 2) Eсли не a и если у человека есть тикеты с лицензионным статусом = free, то он считается converted_free.